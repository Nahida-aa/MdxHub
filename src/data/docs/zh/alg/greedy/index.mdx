---
title: 贪心算法
description: 贪心算法（Greedy Algorithm）是一种在每一步选择中都做出局部最优解的算法. 它的核心思想是通过局部最优解，尝试得到全局最优解. 简单高效，适合某些特定问题. 需要证明贪心选择的正确性
created_at: 2025-03-23T22:32:27Z
updated_at: 2025-03-23T22:32:27Z
tags: [greedy,alg]
---

## 为什么学习贪心算法？

## 例题

### 2024_CA_省C.训练士兵

- 题目连接:洛谷: https://www.luogu.com.cn/problem/P10387

#### 题目描述

有 $n$ 名士兵，这些士兵需要接受一系列特殊的训练，以提升他们的战斗技能。对于第 $i$ 名士兵来说，进行一次训练所需的成本为 $p_i$ 枚金币，而要想成为顶尖战士，他至少需要进行 $c_i$ 次训练。  
为了确保训练的高效性，王国推出了一种组团训练的方案。该方案包含每位士兵所需的一次训练，且总共只需支付 $S$ 枚金币（组团训练方案可以多次购买，即士兵可以进行多次组团训练）。  
作为训练指挥官，请你计算出最少需要花费多少金币，才能使得所有的士兵都成为顶尖战士？

#### 输入格式

输入的第一行包含两个整数 $n$ 和 $S $，用一个空格分隔，表示士兵的数量和进行一次组团训练所需的金币数。  
接下来的 $n$ 行，每行包含两个整数 $p_i$ 和 $c_i$，用一个空格分隔，表示第 $i$ 名士兵进行一次训练的金币成本和要成为顶尖战士所需的训练次数。

#### 输出格式

输出一行包含一个整数，表示使所有士兵成为顶尖战士所需的最少金币数。

#### 输入输出样例

##### 输入

```
3 6
5 2
2 4
3 2
```

##### 输出

```
16
```

#### 说明/提示

花费金币最少的训练方式为：进行 $2$ 次组团训练，花费 $2 × 6 = 12$ 枚金币，此时士兵 $1, 3$ 已成为顶尖战士；再花费 $4$ 枚金币，让士兵 $2$ 进行两次训练，成为顶尖战士。总花费为 $12 + 4 = 16$。

对于 $40\%$ 的评测用例，$1 ≤ n ≤ 10^3，1 ≤ p_i
, c_i ≤ 10^5，1 ≤ S ≤ 10^7$。

对于所有评测用例，$1 ≤ n ≤ 10^5，1 ≤ p_i
, c_i ≤ 10^6，1 ≤ S ≤ 10^{10}$。

#### 思路

- 按照需要训练的次数 $c_i$ 升序排序
- 维护一个动态的 $cnt$, 表示已经组团训练的次数
- 维护一个动态的 $tot$, 表示当前训练所有士兵一次的总成本, 用于和 $S$ 比较
- 初始化总花费 $res:=0$, 遍历一遍 n, 表示按照 $c_i$ 的顺序训练士兵时, 选择组团训练还是单独训练
  - 如果 $S \leq tot$, 表示当前组团训练比单独训练剩下的士兵要便宜
    - 则选择组团训练 $c_i-cnt$ 次, $res := res + (c_i-cnt) \times S$
    - 并更新 $cnt:=c_i$
  - 否则, 表示当前训练所有士兵一次的总成本大于 $S$, 则选择单独训练
    - 则单独将这个人训练 $c_i$ 次, $res := res + (c_i-cnt) \times p_i$
  - 这次迭代结束说明 第 $i$ 个士兵训练完成, 更新 $tot$
    - $tot := tot - p_i$
#### 代码示例: 
```py
# 获得输入
n, S = map(int, input().split())
matrix_p_c = [[0,0]] * n
for i in range(n):
    matrix_p_c[i] = list(map(int, input().split()))
# 按照需要训练的次数 $c_i$ 从升序排序
p, c = [0] * n, [0] * n
matrix_p_c.sort(key=lambda x: x[1])
for i in range(n):
    p[i], c[i] = matrix_p_c[i][0], matrix_p_c[i][1]
# 初始化
res, cnt, tot = 0, 0, sum(p)
# 遍历
for i in range(n):
    if S <= tot:
        res += (c[i] - cnt) * S
        cnt = c[i]
    else:
        res += (c[i] - cnt) * p[i]
    tot -= p[i]
print(res)
```
